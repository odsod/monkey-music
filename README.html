<html>
  <head>

    <title>Quick start</title>
    <meta name="generator" content="kramdown 1.0.2" />
  </head>
  <body>
  <p><img src="documents/logo.png" /></p>

<p>Welcome to the Monkey Music Challenge.</p>

<h2 id="quick-start">Quick start</h2>

<p>To install the challenge runtime:</p>

<p><code>
gem install monkeymusic
</code></p>

<p>To get started quickly:</p>

<p><code>
monkeymusic demo
</code></p>

<p>To see something on the screen:</p>

<p><code>
monkeymusic -p demo_player
</code></p>

<p>You can probably learn a lot about the game from reading the <code>demo_player</code>.</p>

<p>Also make sure to read the protocol examples at the end of the document.</p>

<h2 id="the-level">The level</h2>

<p>Your monkey moves around in a flat 2D level. You can think of the level as
a matrix, where any square can be occupied by one thing at any given time.</p>

<p><code>
 Xl     1 U 2     lX 
t    ll       ll    t
###t ########### t###
#t # #T tlTlt T# # t#
##   #T#l   l#T#   ##
#l ######X X###### l#
##  #   # x #   #  ##
#T#   #t#   #t#   #T#
#x#l##### # #####l#x#
#   #   # l #   #   #
### # # # # # # # ###
#t    #   #   #    t#
#l###l#t#t#t#t#l###l#
</code></p>

<p>Every monkey is represented in the level by a numerical id:</p>

<ul>
  <li><em>Monkey</em>: <code>\d</code></li>
</ul>

<p>Besides monkeys, the level can also contain:</p>

<ul>
  <li><em>Tracks</em>: <code>spotify:track:......................</code></li>
  <li><em>Walls</em>: <code>#</code></li>
  <li><em>The User</em>: <code>U</code></li>
</ul>

<p>Your monkey has one mission: to find and deliver suitable track 
recommendations to <em>The User</em>.</p>

<h2 id="the-user">The user</h2>

<p>To help you figure out what tracks to recommend to your <em>User</em>, you have
access to the following of your user’s toplists:</p>

<ul>
  <li><em>Top tracks</em>: <code>[(track,artist,album,year)]</code></li>
  <li><em>Top albums</em>: <code>[(album,artist,year)]</code></li>
  <li><em>Top artists</em>: <code>[(artist)]</code></li>
</ul>

<p>You also have a list of what the user does not like:</p>

<ul>
  <li><em>Top disliked artists</em>: <code>[(artist)]</code></li>
</ul>

<h2 id="the-monkey">The monkey</h2>

<p>A monkey can move between squares in the four cardinal directions:</p>

<ul>
  <li><em>North</em>: <code>N</code></li>
  <li><em>West</em>: <code>W</code></li>
  <li><em>East</em>: <code>E</code></li>
  <li><em>South</em>: <code>S</code></li>
</ul>

<p>Your monkey can carry a specific amount of tracks at any given time, this
is referred to as the <code>capacity</code> of your monkey. </p>

<p>To stand next to a <em>Track</em> and move towards it is to pick it up, provided that the monkey has remaining <code>capacity</code>.</p>

<p>To stand next to a <em>User</em> and move towards it is to <code>deliver</code> all curretly
carried tracks to the user. Your monkey will then score points according
to how well the tracks fit the user’s music taste. </p>

<p>After delivering tracks, your monkey will once again be at full <code>capacity</code>.</p>

<h2 id="the-scores">The scores</h2>

<p>To decide how well a <em>Track</em> fits the music taste of a <em>User</em>, every track
is put into one of 5 different score tiers.</p>

<p>2 of these tiers are negative tiers. You don’t want your monkey picking up
and delivering tracks from these tiers. </p>

<p>The following criteria decide which tier any given track belongs to:</p>

<h3 id="tier--2-disliked-artist">Tier -2: Disliked artist</h3>

<p>To recommend a track whose <code>artist</code> is among the user’s <em>Top disliked
artists</em> is simply an epic fail.</p>

<h3 id="tier--1-snderlyssnad">Tier -1: “Sönderlyssnad”</h3>

<p>When the <code>track</code> is already among the user’s <em>Top tracks</em>, there is not much
point in recommending it, is there?</p>

<h3 id="tier--1-favorite-artist">Tier += 1: Favorite artist</h3>

<p>If the <code>artist</code> of the track is among the user’s <em>Top artists</em>, the track
will be bumped up one tier.</p>

<h3 id="tier--1-favorite-album">Tier += 1: Favorite album</h3>

<p>If the <code>album</code> of the track is among the user’s <em>Top albums</em>, the track
will be bumped up one tier.</p>

<h3 id="tier--1-favorite-decade">Tier += 1: Favorite decade</h3>

<p>This is an interesting one. Every user has a <em>Top decade</em>, which is the
decade that is most prominent among the user’s <em>Top tracks</em> and 
<em>Top albums</em>.</p>

<p>If the <code>year</code> of the track belongs to the user’s <em>Top decade</em>, the track
will be bumped up one tier.</p>

<h3 id="tally">Tally</h3>

<p>Your track will be scored according to it’s tier:</p>

<ul>
  <li><em>Tier -2</em>: -16 points</li>
  <li><em>Tier -1</em>: -4 points</li>
  <li><em>Tier 1</em>: 4 points</li>
  <li><em>Tier 2</em>: 16 points</li>
  <li><em>Tier 3</em>: 64 points</li>
</ul>

<p><em>Tier 3</em> tracks are obviously very valuable, so be on the lookout for
these.</p>

<p>Once a <em>Track</em> is picked up, there is no way to get rid of it but to
<code>deliver</code> it to the <em>User</em>, so make sure to stay away from negative tier
tracks.</p>

<h2 id="the-game">The game</h2>

<p>Every game is broken up into a number of turns. Every <code>turn</code>, your
program will be fed information about the current state of the level, by
reading from <code>stdin</code>. Your program responds by printing one <code>command</code>,
to <code>stdout</code>, telling your <em>Monkey</em> what to do during the current turn.</p>

<p>If there are more that one <em>Monkey</em> in the level, <code>fate</code> will decide which
monkey gets to carry out its command first.</p>

<p>The game consists of two <code>phases</code>.</p>

<h3 id="init-phase">Init phase</h3>

<p>During the <code>init</code> phase, your program will read information about 
the level that will be useful during the entire course of the game.</p>

<p>The information that can be read from <code>stdin</code> during the <code>init</code> phase is:</p>

<ul>
  <li>The numerical <code>id</code> of your <em>Monkey</em></li>
  <li>The <code>width</code> of the map</li>
  <li>The <code>height</code> of the map</li>
  <li>The <code>turn limit</code> of the game</li>
  <li>The <code>toplists</code> of the <em>User</em>.</li>
</ul>

<h3 id="turn-phase">Turn phase</h3>

<p>After the <code>init</code> phase, a number of <code>turn</code> phases will follow.</p>

<p>The information that can be read from <code>stdin</code> during the <code>turn</code> phase is:</p>

<ul>
  <li>The <code>turn number</code> (1 - <code>turn limit</code>)</li>
  <li>The current <code>capacity</code> of your monkey <code>(&gt;= 0)</code></li>
  <li>The <code>remaining time</code> your program can run before <code>penalty</code>.</li>
</ul>

<p>That’s right, your program will only be allowed to run for a certain
amount of time during the course of the game. When your <code>remaining time</code>
is depleted, your <em>Monkey</em> will fall asleep for 5 turns, after which your
<code>remaining time</code> will be replenished.</p>

<h2 id="the-commands">The commands</h2>

<p>Every <code>turn</code>, you can issue one <code>command</code> to your <em>Monkey</em>.</p>

<h3 id="movement-commands">Movement commands</h3>

<p>The following commands will result in your <em>Monkey</em> attempting to move in
the specified direction. The move will succeed if the adjacent square is
empty, or if the move results in the <em>Monkey</em> picking up a <em>Track</em> or
deliverings tracks to the <em>User</em>.</p>

<ul>
  <li>Move north: <code>N</code></li>
  <li>Move west: <code>W</code></li>
  <li>Move east: <code>E</code></li>
  <li>Move south: <code>S</code></li>
</ul>

<h3 id="lookup-command">Lookup command</h3>

<p>Instead of moving, you can every round do a <code>lookup</code> to get <code>metadata</code> on 
a <em>Track</em>. You will need the metadata for a track to calculate which
<code>tier</code> it belongs to.</p>

<p>To do a lookup, simply print the <code>uri</code> of the track to <code>stdout</code>.</p>

<ul>
  <li>Lookup: <code>spotify:track:......................</code></li>
</ul>

<h3 id="boost-command">Boost command</h3>

<p>Once every game, you can issue one <code>boost</code> command, and then issue 3 other
commands that will be carried out during that round.</p>

<h2 id="the-stdin-protocol">The stdin protocol</h2>

<h3 id="diagram">Diagram</h3>

<p style="text-align: center">
  <img src="documents/stdinflow.png" />
</p>

<h3 id="init-phase-1">Init phase</h3>

<div style="font-size: 80%;">
```
INIT 
9 // Monkey id
11 // Level width
11 // Level height
100 // Turn limit
10 // Number of top tracks
Condemnation,Depeche Mode,Songs Of Faith And Devotion,1993
Enola Gay - 2003 - Remaster,Orchestral Manoeuvres In The Dark,Organisation,2003
The Fog Rose High,Craft Spells,Idle Labor,2011
Cars,Gary Numan,Premier Hits,1981
Tainted Love,Soft Cell,Tainted Love / Where Did Our Love Go,2009
You Surround Me,Erasure,Wild!,1989
Something New,Girls Aloud,Something New,2012
Guilty Partner,New Order,Technique [Collector's Edition],2008
The New Stone Age - 2003 Digital Remaster,Orchestral Manoeuvres In The Dark,Architecture And Morality,2003
Don't Go,Yazoo,Upstairs At Eric's,1982
10 // Number of top albums
Delta Machine,Depeche Mode,2013
Architecture And Morality,Orchestral Manoeuvres In The Dark,2003
Replicas,Tubeway Army,1979
Vienna,Ultravox,2008
Hits The Very Best Of Erasure,Erasure,2003
Tainted Love / Where Did Our Love Go,Soft Cell,2009
The Best Of New Order,New Order,1994
Witching Hour,Ladytron,2007
Nightdrive With You,Anoraak,2008
Boxed,Eurythmics,2005
10 // Number of top artists
Depeche Mode
Orchestral Manoeuvres In The Dark
The Human League
New Order
The Postal Service
Kraftwerk
Gary Numan
MGMT
M83
Duran Duran
5 // Number of disliked artists
Misfits
The Ramones
Bad Religion
The Clash
Sex Pistols
```
</div>

<h3 id="turn-phase-1">Turn phase</h3>

<div style="font-size: 80%;">
```
TURN
1 // Turn number
3 // Remaining capacity
10000 // Remaining runtime (ms)
_,_,_,_,_,_,_,_,_,_,_
_,W,W,_,_,_,_,_,W,W,_
_,W,spotify:track:5H85hOp2oMlhMh9JlkdJP2,_,_,_,_,_,spotify:track:3NYCaxkggl0Hh8vQptSUvV,W,_
_,_,_,_,_,_,_,spotify:track:3qAEEfC57OI4SCuj7Zk5va,_,_,_
9,_,_,_,_,_,_,_,_,_,_
_,_,_,spotify:track:4CARtDIJS87fOmWb1RxLKK,_,_,_,_,_,_,U
_,_,_,_,_,_,_,_,_,_,_
_,_,_,_,_,_,_,spotify:track:1ARZpuJ5KjxvmsFU4NryQH,_,_,_
_,W,spotify:track:0S8LgLoseDB6W2HWd1ym6P,_,_,_,_,_,spotify:track:3NwaVr6RJg2LPBcJ1Ysl1O,W,_
_,W,W,_,_,_,_,_,W,W,_
_,_,_,_,_,_,_,_,_,_,_
```
</div>

<h2 id="the-stdout-protocol">The stdout protocol</h2>

<h3 id="movement">Movement</h3>

<p><code>
W
</code></p>

<h3 id="lookup">Lookup</h3>

<p>The following is printed to <code>stdout</code>:</p>

<p><code>
spotify:track:0S8LgLoseDB6W2HWd1ym6P
</code></p>

<p>Then the following can be read from <code>stdin</code>:</p>

<p><code>
1
spotify:track:0S8LgLoseDB6W2HWd1ym6P,,Condemnation,,Depeche Mode,,Songs Of
Faith And Devotion,,1993
</code></p>

<p>If the lookup failed:</p>

<p><code>
0
</code></p>

<p>Remember to flush the output buffers!</p>

<h3 id="boost">Boost</h3>

<p>The letter <code>B</code> followed by a comma-separated lists of other commands:</p>

<p><code>
B,W,spotify:track:4CARtDIJS87fOmWb1RxLKK,spotify:track:0S8LgLoseDB6W2HWd1ym6P
</code></p>

<p>Then the monkey will move <code>west</code> and the following can be read from
<code>stdin</code>:</p>

<p><code>
2
spotify:track:0S8LgLoseDB6W2HWd1ym6P,"Condemnation","Depeche Mode","Songs
Of Faith And Devotion",1993
spotify:track:4CARtDIJS87fOmWb1RxLKK,The Fog Rose High,Craft Spells,Idle Labor,2011
</code></p>

  </body>
</html>
